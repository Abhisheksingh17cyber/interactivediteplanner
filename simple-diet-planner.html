<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTERNITY DIET PLANNER</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 20px 0;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.3rem;
            color: #cccccc;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Progress Bar Enhanced */
        .progress-container {
            background: linear-gradient(145deg, #333333, #2a2a2a);
            border-radius: 20px;
            padding: 30px 25px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 15px;
        }

        .progress-line-bg {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 4px;
            background: #555555;
            transform: translateY(-50%);
            border-radius: 2px;
            z-index: 1;
        }

        .progress-line-fill {
            position: absolute;
            top: 50%;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transform: translateY(-50%);
            border-radius: 2px;
            z-index: 2;
            transition: width 0.5s ease;
            width: 16.66%;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 3;
            background: #2d2d2d;
            border-radius: 10px;
            padding: 10px;
            min-width: 120px;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #666666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .step.active .step-number {
            background: #ffffff;
            color: #1a1a1a;
            transform: scale(1.1);
            border-color: #4CAF50;
        }

        .step.completed .step-number {
            background: #4CAF50;
            color: #ffffff;
            border-color: #45a049;
        }

        .step-label {
            font-size: 0.95rem;
            color: #cccccc;
            text-align: center;
            font-weight: 500;
        }

        .step.active .step-label {
            color: #ffffff;
            font-weight: 600;
        }

        .step.completed .step-label {
            color: #4CAF50;
        }

        /* Form Container Enhanced */
        .form-container {
            background: linear-gradient(145deg, #2d2d2d, #252525);
            border-radius: 20px;
            padding: 50px 40px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border: 1px solid #404040;
        }

        .form-step {
            display: none;
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.3s ease;
        }

        .form-step.active {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }

        .form-step h2 {
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: #ffffff;
            text-align: center;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 15px;
            position: relative;
        }

        .form-step h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 50%;
            width: 60px;
            height: 3px;
            background: #ffffff;
            transform: translateX(-50%);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 20px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #ffffff;
            font-size: 1.1rem;
        }

        .required::after {
            content: ' *';
            color: #ff4444;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #555555;
            border-radius: 10px;
            background: #1a1a1a;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
            transform: translateY(-2px);
        }

        input:invalid, select:invalid {
            border-color: #ff4444;
        }

        input.error, select.error {
            border-color: #ff4444;
            background-color: rgba(255, 68, 68, 0.1);
            animation: shake 0.3s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Radio and Checkbox Groups Enhanced */
        .radio-group, .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border: 2px solid #555555;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .radio-item::before, .checkbox-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(76, 175, 80, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .radio-item:hover::before, .checkbox-item:hover::before {
            left: 100%;
        }

        .radio-item:hover, .checkbox-item:hover {
            border-color: #4CAF50;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
        }

        .radio-item input:checked + label,
        .checkbox-item input:checked + label {
            color: #4CAF50;
            font-weight: 600;
        }

        .radio-item input, .checkbox-item input {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            accent-color: #4CAF50;
        }

        /* Enhanced Navigation */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #404040;
        }

        .btn {
            padding: 16px 35px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            position: relative;
            overflow: hidden;
            min-width: 140px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(145deg, #ffffff, #e0e0e0);
            color: #1a1a1a;
            box-shadow: 0 5px 15px rgba(255,255,255,0.2);
        }

        .btn-primary:hover {
            background: linear-gradient(145deg, #f0f0f0, #d0d0d0);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255,255,255,0.3);
        }

        .btn-secondary {
            background: linear-gradient(145deg, #555555, #444444);
            color: #ffffff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn-secondary:hover {
            background: linear-gradient(145deg, #666666, #555555);
            transform: translateY(-3px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Error Message Styles */
        .error-message {
            background: linear-gradient(145deg, #ff4444, #cc3333);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 500;
            animation: slideDown 0.3s ease;
            border: 1px solid #ff6666;
        }

        .success-message {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 500;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Results Section Enhanced */
        .results-container {
            display: none;
            background: linear-gradient(145deg, #2d2d2d, #252525);
            padding: 60px 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border: 1px solid #404040;
        }

        .results-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-container h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #4CAF50;
        }

        .results-container p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #cccccc;
        }

        .diet-plan {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid #404040;
        }

        .plan-section {
            margin-bottom: 25px;
            text-align: left;
        }

        .plan-section h3 {
            color: #4CAF50;
            font-size: 1.5rem;
            margin-bottom: 15px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        .meal-item {
            background: #252525;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        .meal-item h4 {
            color: #ffffff;
            margin-bottom: 8px;
        }

        .meal-item p {
            color: #cccccc;
            font-size: 0.95rem;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #1a1a1a;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .radio-group, .checkbox-group {
                grid-template-columns: 1fr;
            }

            .progress-bar {
                flex-wrap: wrap;
                gap: 15px;
            }

            .step {
                min-width: 100px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .form-container {
                padding: 30px 20px;
            }

            .form-step h2 {
                font-size: 1.8rem;
            }

            .form-navigation {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .progress-container {
                padding: 20px 15px;
            }

            .step-number {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>INTERNITY DIET PLANNER</h1>
            <p>Get a professionally crafted diet plan tailored specifically to your goals, preferences, and lifestyle. Download your complete nutrition guide as a PDF with detailed meal plans and nutritional guidance.</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-line-bg"></div>
                <div class="progress-line-fill"></div>
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Personal Info</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Physical Data</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Goals</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Diet Preferences</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Health Info</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-label">Lifestyle</div>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <form id="dietPlanForm" novalidate>
                <!-- Step 1: Personal Information -->
                <div class="form-step active" data-step="1">
                    <h2>Personal Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fullName" class="required">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required 
                                   placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" name="email" required 
                                   placeholder="Enter your email address">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="age" class="required">Age</label>
                            <input type="number" id="age" name="age" min="16" max="100" required 
                                   placeholder="Enter your age">
                        </div>
                        <div class="form-group">
                            <label for="gender" class="required">Gender</label>
                            <select id="gender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number (Optional)</label>
                        <input type="tel" id="phone" name="phone" 
                               placeholder="Enter your phone number">
                    </div>
                </div>

                <!-- Step 2: Physical Data -->
                <div class="form-step" data-step="2">
                    <h2>Physical Measurements</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="weight" class="required">Current Weight (kg)</label>
                            <input type="number" id="weight" name="weight" step="0.1" min="30" max="300" required 
                                   placeholder="Enter your current weight">
                        </div>
                        <div class="form-group">
                            <label for="height" class="required">Height (cm)</label>
                            <input type="number" id="height" name="height" min="120" max="250" required 
                                   placeholder="Enter your height">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bodyFat">Body Fat Percentage (%) - Optional</label>
                            <input type="number" id="bodyFat" name="bodyFat" step="0.1" min="5" max="50" 
                                   placeholder="Enter if known">
                        </div>
                        <div class="form-group">
                            <label for="activityLevel" class="required">Activity Level</label>
                            <select id="activityLevel" name="activityLevel" required>
                                <option value="">Select Activity Level</option>
                                <option value="sedentary">Sedentary (desk job, no exercise)</option>
                                <option value="light">Lightly Active (light exercise 1-3 days/week)</option>
                                <option value="moderate">Moderately Active (moderate exercise 3-5 days/week)</option>
                                <option value="very">Very Active (hard exercise 6-7 days/week)</option>
                                <option value="extreme">Extremely Active (very hard exercise, physical job)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Goals -->
                <div class="form-step" data-step="3">
                    <h2>Your Fitness Goals</h2>
                    <div class="form-group">
                        <label class="required">Primary Goal</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="weightLoss" name="primaryGoal" value="weight_loss" required>
                                <label for="weightLoss">Weight Loss</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="weightGain" name="primaryGoal" value="weight_gain">
                                <label for="weightGain">Weight Gain</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="muscleBuilding" name="primaryGoal" value="muscle_building">
                                <label for="muscleBuilding">Muscle Building</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="maintenance" name="primaryGoal" value="maintenance">
                                <label for="maintenance">Weight Maintenance</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="targetWeight" class="required">Target Weight (kg)</label>
                            <input type="number" id="targetWeight" name="targetWeight" step="0.1" min="30" max="300" required 
                                   placeholder="Enter your target weight">
                        </div>
                        <div class="form-group">
                            <label for="timeline" class="required">Timeline to Achieve Goal</label>
                            <select id="timeline" name="timeline" required>
                                <option value="">Select Timeline</option>
                                <option value="1month">1 Month</option>
                                <option value="3months">3 Months</option>
                                <option value="6months">6 Months</option>
                                <option value="1year">1 Year</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Diet Preferences -->
                <div class="form-step" data-step="4">
                    <h2>Diet Preferences</h2>
                    <div class="form-group">
                        <label for="dietType" class="required">Diet Type</label>
                        <select id="dietType" name="dietType" required>
                            <option value="">Select Diet Type</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="vegan">Vegan</option>
                            <option value="non_vegetarian">Non-Vegetarian</option>
                            <option value="keto">Ketogenic (Keto)</option>
                            <option value="mediterranean">Mediterranean</option>
                            <option value="paleo">Paleo</option>
                            <option value="intermittent">Intermittent Fasting</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mealFrequency" class="required">Preferred Meal Frequency</label>
                            <select id="mealFrequency" name="mealFrequency" required>
                                <option value="">Select Meal Frequency</option>
                                <option value="3meals">3 Main Meals</option>
                                <option value="4meals">4 Meals (3 main + 1 snack)</option>
                                <option value="5meals">5-6 Small Meals</option>
                                <option value="2meals">2 Meals (Intermittent Fasting)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="waterIntake" class="required">Daily Water Goal (liters)</label>
                            <input type="number" id="waterIntake" name="waterIntake" step="0.1" min="1" max="5" required 
                                   placeholder="Recommended: 2-3 liters">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="allergies">Food Allergies/Intolerances</label>
                        <textarea id="allergies" name="allergies" rows="3" 
                                  placeholder="List any food allergies, intolerances, or foods you want to avoid..."></textarea>
                    </div>
                </div>

                <!-- Step 5: Health Information -->
                <div class="form-step" data-step="5">
                    <h2>Health Information</h2>
                    <div class="form-group">
                        <label>Medical Conditions (Check all that apply)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="diabetes" name="medicalConditions" value="diabetes">
                                <label for="diabetes">Diabetes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hypertension" name="medicalConditions" value="hypertension">
                                <label for="hypertension">High Blood Pressure</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="pcos" name="medicalConditions" value="pcos">
                                <label for="pcos">PCOS/PCOD</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="thyroid" name="medicalConditions" value="thyroid">
                                <label for="thyroid">Thyroid Issues</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="cholesterol" name="medicalConditions" value="cholesterol">
                                <label for="cholesterol">High Cholesterol</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="noConditions" name="medicalConditions" value="none">
                                <label for="noConditions">None of the above</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="medications">Current Medications or Supplements</label>
                        <textarea id="medications" name="medications" rows="3" 
                                  placeholder="List any medications or supplements you're currently taking..."></textarea>
                    </div>
                </div>

                <!-- Step 6: Lifestyle -->
                <div class="form-step" data-step="6">
                    <h2>Lifestyle Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="workSchedule" class="required">Work Schedule</label>
                            <select id="workSchedule" name="workSchedule" required>
                                <option value="">Select Work Schedule</option>
                                <option value="regular">Regular (9 AM - 5 PM)</option>
                                <option value="shift">Shift Work</option>
                                <option value="flexible">Flexible Hours</option>
                                <option value="night">Night Shift</option>
                                <option value="student">Student</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cookingSkills" class="required">Cooking Skills</label>
                            <select id="cookingSkills" name="cookingSkills" required>
                                <option value="">Select Cooking Skills</option>
                                <option value="beginner">Beginner (Basic cooking)</option>
                                <option value="intermediate">Intermediate (Can follow recipes)</option>
                                <option value="advanced">Advanced (Experienced cook)</option>
                                <option value="none">Prefer pre-made/takeout meals</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="budget" class="required">Monthly Food Budget</label>
                            <select id="budget" name="budget" required>
                                <option value="">Select Budget Range</option>
                                <option value="low">₹3,000 - ₹5,000</option>
                                <option value="medium">₹5,000 - ₹8,000</option>
                                <option value="high">₹8,000 - ₹12,000</option>
                                <option value="premium">₹12,000+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="sleepHours" class="required">Average Sleep Hours</label>
                            <select id="sleepHours" name="sleepHours" required>
                                <option value="">Select Sleep Hours</option>
                                <option value="less5">Less than 5 hours</option>
                                <option value="5-6">5-6 hours</option>
                                <option value="6-7">6-7 hours</option>
                                <option value="7-8">7-8 hours</option>
                                <option value="more8">More than 8 hours</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="specialRequests">Special Requests or Notes</label>
                        <textarea id="specialRequests" name="specialRequests" rows="3" 
                                  placeholder="Any additional information or special requirements..."></textarea>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="form-navigation">
                    <button type="button" id="prevBtn" class="btn btn-secondary" style="display: none;">
                        Previous
                    </button>
                    <button type="button" id="nextBtn" class="btn btn-primary">
                        Next
                    </button>
                    <button type="submit" id="submitBtn" class="btn btn-primary" style="display: none;">
                        <span class="btn-text">Generate Diet Plan</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Container -->
        <div class="results-container" id="resultsContainer">
            <h2>Your Personalized Diet Plan</h2>
            <p>Based on your information, here's your customized nutrition plan:</p>
            
            <div class="diet-plan" id="dietPlan">
                <!-- Diet plan content will be generated here -->
            </div>

            <button class="btn btn-primary" onclick="downloadPlan()">
                Download PDF Plan
            </button>
            <button class="btn btn-secondary" onclick="restartForm()">
                Create New Plan
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let currentStep = 1;
        const totalSteps = 6;
        let formData = {};

        // Initialize the form
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressBar();
            
            // Event listeners
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('prevBtn').addEventListener('click', prevStep);
            document.getElementById('dietPlanForm').addEventListener('submit', generateDietPlan);
        });

        function nextStep() {
            if (validateStep(currentStep)) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showStep(currentStep);
                    updateProgressBar();
                    updateButtons();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressBar();
                updateButtons();
            }
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(stepEl => {
                stepEl.classList.remove('active');
            });
            
            // Show current step
            document.querySelector(`[data-step="${step}"]`).classList.add('active');
        }

        function updateProgressBar() {
            const progressFill = document.querySelector('.progress-line-fill');
            const percentage = (currentStep / totalSteps) * 100;
            progressFill.style.width = percentage + '%';
            
            // Update step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                    step.querySelector('.step-number').textContent = '✓';
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                    step.querySelector('.step-number').textContent = index + 1;
                } else {
                    step.querySelector('.step-number').textContent = index + 1;
                }
            });
        }

        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.style.display = currentStep === 1 ? 'none' : 'block';
            nextBtn.style.display = currentStep === totalSteps ? 'none' : 'block';
            submitBtn.style.display = currentStep === totalSteps ? 'block' : 'none';
        }

        function validateStep(step) {
            const currentStepEl = document.querySelector(`[data-step="${step}"]`);
            const requiredFields = currentStepEl.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('error');
                    isValid = false;
                } else {
                    field.classList.remove('error');
                }
            });
            
            if (!isValid) {
                showMessage('Please fill in all required fields.', 'error');
            }
            
            return isValid;
        }

        function showMessage(message, type) {
            const existingMessage = document.querySelector('.error-message, .success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'error' ? 'error-message' : 'success-message';
            messageDiv.textContent = message;
            
            const currentStep = document.querySelector('.form-step.active');
            currentStep.insertBefore(messageDiv, currentStep.firstChild);
            
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 5000);
        }

        function generateDietPlan(e) {
            e.preventDefault();
            
            if (!validateStep(currentStep)) {
                return;
            }
            
            // Collect form data
            const formElement = document.getElementById('dietPlanForm');
            const formDataObj = new FormData(formElement);
            
            formData = {};
            for (let [key, value] of formDataObj.entries()) {
                if (formData[key]) {
                    if (Array.isArray(formData[key])) {
                        formData[key].push(value);
                    } else {
                        formData[key] = [formData[key], value];
                    }
                } else {
                    formData[key] = value;
                }
            }
            
            // Show loading
            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text') || submitBtn;
            btnText.innerHTML = '<span class="loading"></span> Generating...';
            
            // Generate plan after delay
            setTimeout(() => {
                createDietPlan();
                showResults();
                btnText.textContent = 'Generate Diet Plan';
            }, 2000);
        }

        function createDietPlan() {
            const weight = parseFloat(formData.weight);
            const height = parseFloat(formData.height);
            const age = parseInt(formData.age);
            const gender = formData.gender;
            const activityLevel = formData.activityLevel;
            const goal = formData.primaryGoal;
            
            // Calculate BMR using Mifflin-St Jeor Equation
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            // Activity multipliers
            const activityMultipliers = {
                'sedentary': 1.2,
                'light': 1.375,
                'moderate': 1.55,
                'very': 1.725,
                'extreme': 1.9
            };
            
            const dailyCalories = Math.round(bmr * activityMultipliers[activityLevel]);
            
            // Adjust calories based on goal
            let targetCalories = dailyCalories;
            if (goal === 'weight_loss') {
                targetCalories = dailyCalories - 500; // 500 calorie deficit
            } else if (goal === 'weight_gain') {
                targetCalories = dailyCalories + 500; // 500 calorie surplus
            }
            
            // Create meal plan
            const dietPlan = createMealPlan(targetCalories, formData.dietType, formData.mealFrequency);
            
            displayDietPlan(dietPlan, targetCalories);
        }

        function createMealPlan(calories, dietType, mealFreq) {
            const isVeg = dietType === 'vegetarian' || dietType === 'vegan';
            const isVegan = dietType === 'vegan';
            
            let meals = {};
            
            if (mealFreq === '3meals') {
                meals = {
                    'Breakfast': Math.round(calories * 0.25),
                    'Lunch': Math.round(calories * 0.40),
                    'Dinner': Math.round(calories * 0.35)
                };
            } else if (mealFreq === '4meals') {
                meals = {
                    'Breakfast': Math.round(calories * 0.25),
                    'Lunch': Math.round(calories * 0.35),
                    'Snack': Math.round(calories * 0.10),
                    'Dinner': Math.round(calories * 0.30)
                };
            } else {
                meals = {
                    'Breakfast': Math.round(calories * 0.20),
                    'Mid-Morning Snack': Math.round(calories * 0.10),
                    'Lunch': Math.round(calories * 0.30),
                    'Evening Snack': Math.round(calories * 0.10),
                    'Dinner': Math.round(calories * 0.25),
                    'Night Snack': Math.round(calories * 0.05)
                };
            }
            
            // Sample meal suggestions based on diet type
            const mealSuggestions = {};
            
            Object.keys(meals).forEach(mealName => {
                mealSuggestions[mealName] = generateMealSuggestions(mealName, meals[mealName], isVeg, isVegan);
            });
            
            return mealSuggestions;
        }

        function generateMealSuggestions(mealName, calories, isVeg, isVegan) {
            const suggestions = {
                'Breakfast': isVeg ? 
                    ['Oatmeal with fruits and nuts', 'Vegetable upma with coconut chutney', 'Whole grain toast with avocado'] :
                    ['Scrambled eggs with whole grain toast', 'Greek yogurt with berries', 'Oatmeal with protein powder'],
                'Lunch': isVeg ?
                    ['Dal rice with vegetables', 'Quinoa salad with chickpeas', 'Vegetable curry with roti'] :
                    ['Grilled chicken with quinoa', 'Fish curry with brown rice', 'Lentil soup with chicken'],
                'Dinner': isVeg ?
                    ['Vegetable stir-fry with tofu', 'Mixed dal with vegetables', 'Stuffed bell peppers'] :
                    ['Grilled salmon with vegetables', 'Chicken curry with roti', 'Turkey meatballs with salad'],
                'Snack': isVeg ?
                    ['Mixed nuts and fruits', 'Hummus with vegetables', 'Greek yogurt with honey'] :
                    ['Protein shake', 'Boiled eggs', 'Cottage cheese with fruits'],
                'Mid-Morning Snack': ['Fresh fruits', 'Green tea with almonds', 'Vegetable juice'],
                'Evening Snack': ['Roasted chickpeas', 'Fruit smoothie', 'Whole grain crackers'],
                'Night Snack': ['Herbal tea', 'Small portion of nuts', 'Low-fat milk']
            };
            
            return suggestions[mealName] || ['Balanced meal as per your preferences'];
        }

        function displayDietPlan(mealPlan, targetCalories) {
            const dietPlanDiv = document.getElementById('dietPlan');
            
            let planHTML = `
                <div class="plan-section">
                    <h3>Daily Calorie Target: ${targetCalories} calories</h3>
                    <p>Based on your goals and activity level</p>
                </div>
            `;
            
            Object.keys(mealPlan).forEach(mealName => {
                planHTML += `
                    <div class="plan-section">
                        <h3>${mealName}</h3>
                        ${mealPlan[mealName].map(suggestion => `
                            <div class="meal-item">
                                <h4>${suggestion}</h4>
                                <p>Nutritious and balanced meal option</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            });
            
            planHTML += `
                <div class="plan-section">
                    <h3>General Guidelines</h3>
                    <div class="meal-item">
                        <h4>Hydration</h4>
                        <p>Drink ${formData.waterIntake || 2.5} liters of water daily</p>
                    </div>
                    <div class="meal-item">
                        <h4>Timing</h4>
                        <p>Maintain regular meal times and avoid late-night eating</p>
                    </div>
                    <div class="meal-item">
                        <h4>Exercise</h4>
                        <p>Combine this diet plan with regular physical activity for best results</p>
                    </div>
                </div>
            `;
            
            dietPlanDiv.innerHTML = planHTML;
        }

        function showResults() {
            document.querySelector('.form-container').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.getElementById('resultsContainer').classList.add('active');
        }

        function downloadPlan() {
            // Create a simple text version for download
            let planText = `INTERNITY DIET PLANNER - PERSONALIZED PLAN\n\n`;
            planText += `Name: ${formData.fullName}\n`;
            planText += `Email: ${formData.email}\n`;
            planText += `Goal: ${formData.primaryGoal.replace('_', ' ')}\n\n`;
            
            planText += `MEAL PLAN:\n`;
            planText += document.getElementById('dietPlan').innerText;
            
            const blob = new Blob([planText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${formData.fullName.replace(/\s+/g, '_')}_diet_plan.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function restartForm() {
            currentStep = 1;
            formData = {};
            document.getElementById('dietPlanForm').reset();
            document.querySelector('.form-container').style.display = 'block';
            document.querySelector('.progress-container').style.display = 'block';
            document.getElementById('resultsContainer').classList.remove('active');
            showStep(1);
            updateProgressBar();
            updateButtons();
        }
    </script>
</body>
</html>